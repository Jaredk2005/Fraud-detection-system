import{e as d,G as k,H as v,z as N,I as j,h as x,J as l,K as P,L as g,M as S,N as O,g as h,O as y,P as T,Q as _,S as w,R,T as A,U as c,V as B}from"./Cuvv8fMg.js";const E=d({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},setup(t,s){return()=>y(l[t.name],t.layoutProps,s.slots)}}),H={name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},I=d({name:"NuxtLayout",inheritAttrs:!1,props:H,setup(t,s){const a=k(),u=g(c),e=!u||u===v()?P():u,o=N(()=>{let n=h(t.name)??(e==null?void 0:e.meta.layout)??"default";return n&&!(n in l)&&t.fallback&&(n=h(t.fallback)),n}),i=j();s.expose({layoutRef:i});const r=a.deferHydration();if(a.isHydrating){const n=a.hooks.hookOnce("app:error",r);x().beforeEach(n)}let f;return()=>{const n=o.value&&o.value in l,p=(e==null?void 0:e.meta.layoutTransition)??S,b=f;return f=o.value,O(n&&p,{default:()=>y(w,{suspensible:!0,onResolve:()=>{_(r)}},{default:()=>y(C,{layoutProps:T(s.attrs,{ref:i}),key:o.value||void 0,name:o.value,shouldProvide:!t.name,isRenderingNewLayout:m=>m!==b&&m===o.value,hasTransition:!!p},s.slots)})}).default()}}}),C=d({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean},isRenderingNewLayout:{type:Function,required:!0}},setup(t,s){const a=t.name;t.shouldProvide&&R(B,{isCurrent:e=>a===(e.meta.layout??"default")});const u=g(c);if(u&&u===v()){const e=P(),o={};for(const i in e){const r=i;Object.defineProperty(o,r,{enumerable:!0,get:()=>t.isRenderingNewLayout(t.name)?e[r]:u[r]})}R(c,A(o))}return()=>{var e,o;return!a||typeof a=="string"&&!(a in l)?(o=(e=s.slots).default)==null?void 0:o.call(e):y(E,{key:a,layoutProps:t.layoutProps,name:a},s.slots)}}});export{I as _};
