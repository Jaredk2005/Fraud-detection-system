import{_ as R}from"./DeMLfEu4.js";import{e as B,i as m,r as N,D as U,m as V,w as P,o,a as t,c as n,k as b,g as l,t as a,C as w,l as y,n as k,v as A,q as E,F as S,s as T,_ as L}from"./Cuvv8fMg.js";import{s as j}from"./x_rD_Ya3.js";import{f as z}from"./CBpsKyOP.js";const H={class:"space-y-6"},q={class:"card p-6"},$={class:"space-y-4"},G={class:"border-2 border-dashed border-gray-600 rounded-lg p-6 text-center"},K={key:1,class:"space-y-2"},O={class:"text-white font-medium"},X={class:"text-sm text-gray-400"},J={class:"card p-6"},Q={class:"flex items-center justify-between mb-6"},W=["disabled"],Y={key:0,class:"mb-4 p-4 bg-red-900/30 border border-red-700 rounded-lg"},Z={class:"text-red-400 text-sm"},tt={key:1,class:"space-y-4"},et={class:"flex justify-between text-sm"},st={class:"text-blue-400"},lt={class:"w-full bg-gray-700 rounded-full h-2"},it={class:"text-sm text-gray-400"},at={key:2,class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ot={class:"text-center"},nt={class:"text-2xl font-bold text-green-400"},rt={class:"text-center"},dt={class:"text-2xl font-bold text-blue-400"},ct={class:"text-center"},ut={class:"text-2xl font-bold text-purple-400"},mt={class:"text-center"},gt={class:"text-2xl font-bold text-orange-400"},xt={key:3,class:"text-center py-8"},vt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},pt={class:"card p-6"},ft={class:"space-y-4"},yt={class:"flex items-center space-x-2"},_t={class:"card p-6"},bt={class:"space-y-3 max-h-64 overflow-y-auto"},ht={key:0,class:"text-center py-4"},wt={class:"font-medium text-white"},kt={class:"text-sm text-gray-400"},St={class:"text-right"},Tt={class:"font-medium text-green-400"},It={class:"text-sm text-gray-400"},Ft={class:"text-xs text-gray-500 mt-1"},Ct={key:0,class:"card p-6"},Mt={class:"space-y-4"},Dt={class:"w-32 text-sm text-gray-300"},Rt={class:"flex-1 mx-4"},Bt={class:"w-full bg-gray-700 rounded-full h-2"},Nt={class:"w-12 text-sm text-blue-400 text-right"},Ut="http://localhost:8000",Vt=B({__name:"training",setup(Pt){const f=m(!1),r=m(0),v=m(""),d=m(null),p=m(""),c=N({algorithm:"logistic_regression",testSplit:"0.2",randomState:42,autoRetrain:!1}),u=m({accuracy:null,samples:0,trainingTime:null,modelId:null}),_=m([]),h=m([]),I=i=>{const e=i.target;e.files&&e.files.length>0&&(d.value=e.files[0],p.value="")},F=()=>{d.value=null;const i=document.querySelector('input[type="file"]');i&&(i.value="")},C=i=>{if(i===0)return"0 Bytes";const e=1024,g=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(i)/Math.log(e));return parseFloat((i/Math.pow(e,s)).toFixed(2))+" "+g[s]},M=async()=>{if(!d.value){p.value="Please select a CSV file first";return}f.value=!0,r.value=0,p.value="",v.value="Uploading file and starting training...";try{const i=new FormData;i.append("file",d.value);const e=j(()=>{r.value<90&&(r.value+=Math.random()*10,r.value<30?v.value="Uploading and validating file...":r.value<60?v.value="Preprocessing data...":r.value<90&&(v.value="Training model..."))},500),g=await fetch(`${Ut}/train`,{method:"POST",body:i});if(clearInterval(e),!g.ok){const x=await g.json();throw new Error(x.detail||"Training failed")}const s=await g.json();if(!s.success)throw new Error(s.message||"Training failed");r.value=100,v.value=s.message||"Training completed successfully!",u.value={accuracy:s.accuracy,samples:0,trainingTime:s.training_time,modelId:s.model_id},localStorage.clear(),localStorage.setItem("accuracy",s.accuracy),localStorage.setItem("time",s.training_time),localStorage.setItem("model",s.model_id),_.value.unshift({id:Date.now(),algorithm:"Logistic Regression",date:new Date,accuracy:s.accuracy,trainingTime:s.training_time,modelId:s.model_id}),setTimeout(()=>{d.value=null;const x=document.querySelector('input[type="file"]');x&&(x.value="")},2e3)}catch(i){clearInterval(progressInterval),p.value=i.message||"Training failed",console.error("Training error:",i)}finally{setTimeout(()=>{f.value=!1},1e3)}},D=i=>z(i,"MMM dd, yyyy HH:mm");return U(()=>{}),(i,e)=>{const g=R;return o(),V(g,{name:"default"},{default:P(()=>[t("div",H,[t("div",q,[e[7]||(e[7]=t("h2",{class:"text-xl font-semibold text-white mb-4"},"Upload Training Data",-1)),t("div",$,[t("div",G,[t("input",{ref:"fileInput",type:"file",accept:".csv",onChange:I,class:"hidden"},null,544),l(d)?(o(),n("div",K,[e[6]||(e[6]=t("div",{class:"text-2xl text-green-400 mb-2"},"âœ“",-1)),t("p",O,a(l(d).name),1),t("p",X,a(C(l(d).size)),1),t("button",{onClick:F,class:"text-red-400 hover:text-red-300 text-sm mt-2"}," Remove file ")])):(o(),n("div",{key:0,onClick:e[0]||(e[0]=s=>i.$refs.fileInput.click()),class:"cursor-pointer"},e[5]||(e[5]=[t("div",{class:"text-4xl text-gray-400 mb-2"},"ðŸ“„",-1),t("p",{class:"text-gray-300"},"Click to select a CSV file",-1),t("p",{class:"text-sm text-gray-500 mt-1"},"File must contain 'is_fraud' column",-1)])))])])]),t("div",J,[t("div",Q,[e[8]||(e[8]=t("h2",{class:"text-xl font-semibold text-white"},"Model Training Status",-1)),t("button",{onClick:M,disabled:l(f)||!l(d),class:"btn-primary disabled:opacity-50"},a(l(f)?"Training in Progress...":"Start Training"),9,W)]),l(p)?(o(),n("div",Y,[t("p",Z,a(l(p)),1)])):b("",!0),l(f)?(o(),n("div",tt,[t("div",et,[e[9]||(e[9]=t("span",{class:"text-gray-400"},"Progress",-1)),t("span",st,a(l(r))+"%",1)]),t("div",lt,[t("div",{class:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:w({width:l(r)+"%"})},null,4)]),t("p",it,a(l(v)),1)])):l(u).accuracy!==null&&l(u).modelId?(o(),n("div",at,[t("div",ot,[t("div",nt,a((l(u).accuracy*100).toFixed(2))+"%",1),e[10]||(e[10]=t("div",{class:"text-sm text-gray-400"},"Accuracy",-1))]),t("div",rt,[t("div",dt,a(l(u).samples||"N/A"),1),e[11]||(e[11]=t("div",{class:"text-sm text-gray-400"},"Training Samples",-1))]),t("div",ct,[t("div",ut,a((l(u).trainingTime||0).toFixed(1))+"s",1),e[12]||(e[12]=t("div",{class:"text-sm text-gray-400"},"Training Time",-1))]),t("div",mt,[t("div",gt,a(l(u).modelId?l(u).modelId.slice(0,8)+"...":"N/A"),1),e[13]||(e[13]=t("div",{class:"text-sm text-gray-400"},"Model ID",-1))])])):(o(),n("div",xt,e[14]||(e[14]=[t("div",{class:"text-gray-400 text-lg mb-2"},"No model trained yet",-1),t("div",{class:"text-gray-500 text-sm"},"Upload a CSV file and start training to see results",-1)])))]),t("div",vt,[t("div",pt,[e[23]||(e[23]=t("h3",{class:"text-lg font-semibold text-white mb-4"},"Training Configuration",-1)),t("div",ft,[t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Algorithm",-1)),y(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>l(c).algorithm=s),class:"input-field w-full",disabled:""},e[15]||(e[15]=[t("option",{value:"logistic_regression"},"Logistic Regression",-1),t("option",{value:"random_forest"},"Random Forest",-1),t("option",{value:"xgboost"},"XGBoost",-1),t("option",{value:"neural_network"},"Neural Network",-1)]),512),[[k,l(c).algorithm]]),e[17]||(e[17]=t("p",{class:"text-xs text-gray-500 mt-1"},"Currently using Logistic Regression (FastAPI backend)",-1))]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Test Split",-1)),y(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>l(c).testSplit=s),class:"input-field w-full",disabled:""},e[18]||(e[18]=[t("option",{value:"0.2"},"20% (Default)",-1),t("option",{value:"0.3"},"30%",-1),t("option",{value:"0.1"},"10%",-1)]),512),[[k,l(c).testSplit]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Random State",-1)),y(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>l(c).randomState=s),type:"number",class:"input-field w-full",disabled:""},null,512),[[A,l(c).randomState]]),e[21]||(e[21]=t("p",{class:"text-xs text-gray-500 mt-1"},"Fixed at 42 for reproducibility",-1))]),t("div",yt,[y(t("input",{id:"autoRetrain","onUpdate:modelValue":e[4]||(e[4]=s=>l(c).autoRetrain=s),type:"checkbox",class:"rounded border-gray-600 bg-gray-700 text-blue-500",disabled:""},null,512),[[E,l(c).autoRetrain]]),e[22]||(e[22]=t("label",{for:"autoRetrain",class:"text-sm text-gray-300"}," Enable automatic retraining (Coming soon) ",-1))])])]),t("div",_t,[e[25]||(e[25]=t("h3",{class:"text-lg font-semibold text-white mb-4"},"Training History",-1)),t("div",bt,[l(_).length===0?(o(),n("div",ht,e[24]||(e[24]=[t("div",{class:"text-gray-400"},"No training history yet",-1)]))):b("",!0),(o(!0),n(S,null,T(l(_),s=>{var x;return o(),n("div",{key:s.id,class:"flex items-center justify-between p-3 bg-gray-700/50 rounded-lg"},[t("div",null,[t("div",wt,a(s.algorithm),1),t("div",kt,a(D(s.date)),1)]),t("div",St,[t("div",Tt,a((s.accuracy*100).toFixed(2))+"%",1),t("div",It,a(s.trainingTime.toFixed(1))+"s",1),t("div",Ft,"ID: "+a((x=s.modelId)==null?void 0:x.slice(0,8))+"...",1)])])}),128))])])]),l(h).length>0?(o(),n("div",Ct,[e[26]||(e[26]=t("h3",{class:"text-lg font-semibold text-white mb-4"},"Feature Importance",-1)),t("div",Mt,[(o(!0),n(S,null,T(l(h),s=>(o(),n("div",{key:s.name,class:"flex items-center"},[t("div",Dt,a(s.name),1),t("div",Rt,[t("div",Bt,[t("div",{class:"bg-blue-500 h-2 rounded-full",style:w({width:s.importance+"%"})},null,4)])]),t("div",Nt,a(s.importance)+"%",1)]))),128))])])):b("",!0)])]),_:1})}}}),zt=L(Vt,[["__scopeId","data-v-ae4b8bd4"]]);export{zt as default};
